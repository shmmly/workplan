<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Component | work plan</title>
    <meta name="description" content="project for plan and study">
    
    
    <link rel="preload" href="/workplan/assets/css/0.styles.7ff0201d.css" as="style"><link rel="preload" href="/workplan/assets/js/app.37c99ec8.js" as="script"><link rel="preload" href="/workplan/assets/js/20.f5d5ce9a.js" as="script"><link rel="prefetch" href="/workplan/assets/js/12.ac4bd252.js"><link rel="prefetch" href="/workplan/assets/js/2.d8d0300f.js"><link rel="prefetch" href="/workplan/assets/js/3.69555ae4.js"><link rel="prefetch" href="/workplan/assets/js/4.57f43bc7.js"><link rel="prefetch" href="/workplan/assets/js/5.f5aef8d5.js"><link rel="prefetch" href="/workplan/assets/js/6.f88933cd.js"><link rel="prefetch" href="/workplan/assets/js/7.3bb5de3d.js"><link rel="prefetch" href="/workplan/assets/js/8.e214c64f.js"><link rel="prefetch" href="/workplan/assets/js/9.3809f0c4.js"><link rel="prefetch" href="/workplan/assets/js/10.7d127b6c.js"><link rel="prefetch" href="/workplan/assets/js/11.6edeb956.js"><link rel="prefetch" href="/workplan/assets/js/13.5ece9024.js"><link rel="prefetch" href="/workplan/assets/js/14.c25e34e0.js"><link rel="prefetch" href="/workplan/assets/js/15.7a2a09b3.js"><link rel="prefetch" href="/workplan/assets/js/16.6d5909b5.js"><link rel="prefetch" href="/workplan/assets/js/17.6734d556.js"><link rel="prefetch" href="/workplan/assets/js/18.ba965635.js"><link rel="prefetch" href="/workplan/assets/js/19.1daa2ebc.js"><link rel="prefetch" href="/workplan/assets/js/21.571eece1.js"><link rel="prefetch" href="/workplan/assets/js/22.d07f3211.js"><link rel="prefetch" href="/workplan/assets/js/23.5be47220.js"><link rel="prefetch" href="/workplan/assets/js/24.83a778fe.js"><link rel="prefetch" href="/workplan/assets/js/25.134c2dc0.js"><link rel="prefetch" href="/workplan/assets/js/26.e220e0dd.js">
    <link rel="stylesheet" href="/workplan/assets/css/0.styles.7ff0201d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/workplan/" class="home-link router-link-active"><!----> <span class="site-name">work plan</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/workplan/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/workplan/react/" class="nav-link router-link-active">react</a></div><div class="nav-item"><a href="/workplan/typescript/" class="nav-link">typescript</a></div><div class="nav-item"><a href="/workplan/rxjs/" class="nav-link">rxjs</a></div><div class="nav-item"><a href="/workplan/taro/" class="nav-link">taro</a></div><div class="nav-item"><a href="/workplan/javascript/" class="nav-link">javascript</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/workplan/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/workplan/react/" class="nav-link router-link-active">react</a></div><div class="nav-item"><a href="/workplan/typescript/" class="nav-link">typescript</a></div><div class="nav-item"><a href="/workplan/rxjs/" class="nav-link">rxjs</a></div><div class="nav-item"><a href="/workplan/taro/" class="nav-link">taro</a></div><div class="nav-item"><a href="/workplan/javascript/" class="nav-link">javascript</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>react</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/workplan/react/" class="sidebar-link">React</a></li><li><a href="/workplan/react/component.html" class="active sidebar-link">Component</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/workplan/react/component.html#react-createclass" class="sidebar-link">React.createClass</a></li><li class="sidebar-sub-header"><a href="/workplan/react/component.html#react-component" class="sidebar-link">React.Component</a></li><li class="sidebar-sub-header"><a href="/workplan/react/component.html#react-sfc" class="sidebar-link">React.SFC</a></li><li class="sidebar-sub-header"><a href="/workplan/react/component.html#react-purecomponent" class="sidebar-link">React.PureComponent</a></li><li class="sidebar-sub-header"><a href="/workplan/react/component.html#react-fc-functioncomponent" class="sidebar-link">React.FC(FunctionComponent)</a></li></ul></li><li><a href="/workplan/react/typescript.html" class="sidebar-link">使用 create-react-app +typecript 搭建项目</a></li><li><a href="/workplan/react/hooks.html" class="sidebar-link">hooks</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="component"><a href="#component" aria-hidden="true" class="header-anchor">#</a> Component</h1> <p>Component 的三种创建方式</p> <ul><li>React.createClass 最原始的写法</li> <li>React.Component es6的写法</li> <li>React.SFC 无状态组件的写法</li> <li>React.PureComponent 纯组件，是优化react的一个重要方法之一</li> <li>React.FC 无状态组件 替代SFC</li></ul> <p>这里我们用一个Loading的组件例子来演示用法</p> <h2 id="react-createclass"><a href="#react-createclass" aria-hidden="true" class="header-anchor">#</a> React.createClass</h2> <div class="danger custom-block"><p class="custom-block-title">WARNING</p> <p>这个方法很尴尬，本来想新建一个项目使用这个方法，来演示下用法的，
但是启动之后发现，提示 createClass is not a function,才发现
最新的react已经不支持这种写法了。所以这里就不贴例子了，有兴趣的可以百度或者google下用法</p></div> <h2 id="react-component"><a href="#react-component" aria-hidden="true" class="header-anchor">#</a> React.Component</h2> <div class="language-chef extra-class"><pre class="language-text"><code>import React from &quot;react&quot;;
import logo from &quot;../../logo.svg&quot;;
import &quot;./index.css&quot;;

export default class Loading extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            loading: this.props.Loading
        };
    }

    handleClick = e =&gt; {
        setTimeout(() =&gt; {
            this.setState({
                loading: !this.state.loading
            });
        }, 1000)
    };

    render() {
        const {loading} = this.state;
        return (
            &lt;div&gt;
                {loading ? (
                    &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot;/&gt;
                ) : (
                    &quot;数据加载完毕&quot;
                )}
                &lt;button onClick={this.handleClick}&gt;点击加载数据&lt;/button&gt;
            &lt;/div&gt;
        );
    }
}
</code></pre></div><p>这里我们使用了React.Component,这是es6的写法，可以看到我们handleClick方法也使用es6语法，
这样大大的减少了代码量，提高了可读性。</p> <p>在React.Component 中，如果要使用默认的props 区别于React.createClass</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>在React.createClass 中，我们需要使用getDefaultProps 这个方法来实现默认的props
而在React.Component 中，我们可以直接使用 static defaultProps 这个静态变量来定义 默认的props</p></div> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>这个例子中我们没有使用props，而是使用了state在管理自身的状态。</p></div> <h2 id="react-sfc"><a href="#react-sfc" aria-hidden="true" class="header-anchor">#</a> React.SFC</h2> <div class="language-chef extra-class"><pre class="language-text"><code>import logo from &quot;../../logo.svg&quot;
import React from &quot;react&quot;

const Loading  = ({loading=false})=&gt;(
    &lt;div&gt;
        {loading?(&lt;div&gt;
            &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot;/&gt;
        &lt;/div&gt;) :('数据加载完毕')}
    &lt;/div&gt;
)

export default Loading
</code></pre></div><p>这个例子中我们使用了es6的解构、默认赋值、箭头函数等语法，
可以看到无状态组件的写法非常的简单，这意味着他并不管理任何的状态，只需要接收
父组件传递的props来展示props的内容就够了</p> <div class="danger custom-block"><p class="custom-block-title">WARNING</p> <p>需要注意的是无状态组件不支持ref属性，因为在调用之前，组件并不会被初始化。所以没有办法使用ref来获取组件中的dom属性。</p></div> <h2 id="react-purecomponent"><a href="#react-purecomponent" aria-hidden="true" class="header-anchor">#</a> React.PureComponent</h2> <p>如果要学会用这个组件，首先我们需要理解下它的原理,先看下下面这段代码</p> <div class="language-chef extra-class"><pre class="language-text"><code>import React from &quot;react&quot;
export default  class Todo extends  React.PureComponent{
    constructor(props){
        super(props)
        this.state = {
            items:[1,2,3,4]
        }
    }
    handleClick=()=&gt;{
        const {items} = this.state
        items.pop()
        this.setState({
            items
        })
    }
    render(){
        return (
            &lt;div&gt;
                &lt;ul&gt;
                    {this.state.items.map((item,index)=&gt;(
                        &lt;li key={index}&gt;{item}&lt;/li&gt;
                    ))}
                &lt;/ul&gt;
                &lt;button onClick={this.handleClick}&gt;delete&lt;/button&gt;
            &lt;/div&gt;
        )
    }
}
</code></pre></div><h2 id="react-fc-functioncomponent"><a href="#react-fc-functioncomponent" aria-hidden="true" class="header-anchor">#</a> React.FC(FunctionComponent)</h2> <p>这是react 之后提出的 函数组件，废弃了之前的SFC,使用方法和SFC一样</p> <p>运行之后，我们发现无论怎么点击，li的数量都没有发送改变，那么是什么原因呢？
让我们整理下思路哈哈~·</p> <p>在我们react中，如果执行setState操作，那么下面的生命周期应该是shouldComponentUpdate,
这个方法返回true或者false，来执行下面的操作，决定是否进行render操作。
那么我们大胆的假设下，现在li 没有减少 是不是由于没有进行render操作，所以shouldComponentUpdate 肯定返回的就是一个false，
如果我们在上面的代码中，重写所以shouldComponentUpdate 并返回true，然后我们继续运行下,可以发现，li 正常的减少了
如果你在PureComponent 组件中使用了所以shouldComponentUpdate生命周期，react也会出现这样的提示</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>index.js:2178 Warning: Todo has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent.
Please extend React.Component if shouldComponentUpdate is used.</p></div> <p>大意就是，你都用PureComponent组件了，你还去实现shouldComponentUpdate 这个生命周期，干嘛不直接用Component组件呢~~好吧确实有点多此一举的赶脚!!</p> <p>这里推荐一篇文件，讲解了PureComponent的一些知识<a href="http://www.wulv.site/2017-05-31/react-purecomponent.html" target="_blank" rel="noopener noreferrer" default="default">PureComponent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/workplan/react/" class="prev router-link-active">
          React
        </a></span> <span class="next"><a href="/workplan/react/typescript.html">
          使用 create-react-app +typecript 搭建项目
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/workplan/assets/js/20.f5d5ce9a.js" defer></script><script src="/workplan/assets/js/app.37c99ec8.js" defer></script>
  </body>
</html>
